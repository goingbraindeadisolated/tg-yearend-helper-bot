# a-eto-normalno  бот А это нормально?

Краткое описание
- Ботассистент для рефлексии и подведения итогов. Предлагает 5 практик, проводит пользователя по пошаговому сценарию, принимает оплату и пересылает чек админу для ручной верификации.

Ключевые файлы
- `bot_app.py`: основной запуск, обработчики, рассылки и логика оплаты.
- `flow_core.py`: движок пошагового потока (FlowManager, Step, `escape_md_v2`).
- `bot_text.txt` / `bot_text.py`: тексты диалогов и структура шагов  редактируйте `bot_text.txt` и регенерируйте `bot_text.py`.
- `admins.py`: укажите `ADMIN_ID` (ваш Telegram user_id) для администратора.
- `practice.pdf`: файл с практиками, отправляется после подтверждения оплаты.
- `users.json`: собранные `user_id` для рассылок.

Установка
```powershell
python -m pip install -r requirements.txt
```

Запуск
1) Установите переменную окружения `BOT_TOKEN` или вставьте токен в `bot_app.py`.

Пример (PowerShell):
```powershell
$env:BOT_TOKEN = "<ваш_токен>"
python bot_app.py
```

Редактирование текстов и клавиатур
- Правьте диалог в `bot_text.txt`, затем регенерируйте `bot_text.py`.
- Для изменения меток кнопок редактируйте `SCRIPT_STEPS` в `bot_text.py` (поле `answers`).
- Админские команды: `/broadcast` и подтверждение оплаты реализованы в `bot_app.py`.

Полезные заметки
- `flow_core.escape_md_v2` эскейпит спецсимволы MarkdownV2; чтобы сохранить курсив/жирный, используйте флаг `md_v2` в шаге.
- После отладки удалите подробное логирование в `bot_app.py`, чтобы снизить шум в `bot.log`.

Получить свой user_id: отправьте `/whoami` в боте и поместите значение в `admins.py`.

Если нужно, могу добавить инструкции по Docker, CI или деплою  скажите, что включить.
